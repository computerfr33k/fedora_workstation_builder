---
- name: Remove Pre-installed Packages
  dnf:
    name: '{{ remove_packages }}'
    state: absent
  vars:
    remove_packages:
      - ktorrent
      - kget
      - akregator
      - konversation
      - kmail
      - krdc
      - falkon
      - konqueror
      - kamoso
      - juk
      - dragon
      - "calligra-*"
      - mediawriter
      - krusader
      - kmag
      - kmouth

- name: Autoremove Packages
  dnf:
    autoremove: yes

- name: Install Common Packages (for all machines)
  dnf:
    name: '{{ install_packages }}'
    state: latest
  vars:
    install_packages:
      - https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-{{ os_ver }}.noarch.rpm
      - https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-{{ os_ver }}.noarch.rpm
      - https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm
      - hplip-gui
      - code
      - insync
      - insync-dolphin
      - remmina
      - zip
      - unzip
      - git
      - bzip2
      - acpid
      - htop
      - gcc
      - tree
      - syncthing
      - syncthing-gtk
      - VirtualBox-6.0
      - yarn